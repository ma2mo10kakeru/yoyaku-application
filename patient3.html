<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="js/jquery-3.6.0.min.js"></script>
    <title>patient3</title>
    <link rel="stylesheet" href="./css/system.css" />

<script type="text/javascript">
//LocalStorageの入れ物//
    var P3_STATUS0 = "P3_ST0";
    var P3_STATUS1 = "P3_ST1";
    var P3_STATUS2 = "P3_ST2";

//LocalStorage設定&画面表示//
    window.onload = function(){
        let p3status0 = getStorage0();
        setStatus0(p3status0);
        let p3status1 = getStorage1();
        setStatus1(p3status1);
        let p3status2 = getStorage2();
        setStatus2(p3status2);
    }

    function getStorage0(){
        let p3st0 = localStorage.getItem(P3_STATUS0);
        if(p3st0 !== null){
            return p3st0;
        }else{
            return "未投与";
        }
    }
    function setStatus0(p3status0){
        document.getElementById("status_morning").innerText = p3status0;
        setStorage0(p3status0);
    }
    function setStorage0(p3status0){
        localStorage.setItem(P3_STATUS0,p3status0);
    }

    function getStorage1(){
        let p3st1 = localStorage.getItem(P3_STATUS1);
        if(p3st1 !== null){
            return p3st1;
        }else{
            return "未投与";
        }
    }
    function setStatus1(p3status1){
        document.getElementById("status_noon").innerText = p3status1;
        setStorage1(p3status1);
    }
    function setStorage1(p3status1){
        localStorage.setItem(P3_STATUS1,p3status1);
    }

    function getStorage2(){
        let p3st2 = localStorage.getItem(P3_STATUS2);
        if(p3st2 !== null){
            return p3st2;
        }else{
            return "未投与";
        }
    }
    function setStatus2(p3status2){
        document.getElementById("status_night").innerText = p3status2;
        setStorage2(p3status2);
    }
    function setStorage2(p3status2){
        localStorage.setItem(P3_STATUS2,p3status2);
    }
//LocalStorage設定&画面表示//

//JSON読み込み//
 $(function(){
    $.getJSON("drugdata.json",display);
　});
function display(drugdata){
    $("#p_name").html(drugdata[3].name);
};
//JSON読み込み//

</script>
</head>

<body>
    <div class="container">
        <header>
            <p class="title">与薬情報選択画面</p>
        </header>
        
    <div class="main">
    <br>
    <table border="1" class="list">
        <caption>①<br>与薬情報</caption>
        <tr>
            <th colspan="3">氏名</th>
        </tr>
        <tr>
            <td colspan="3" id="p_name"></td>
        </tr>
        <tr>
            <th>投与時間</th><th>ステータス</th><th>与薬情報を閲覧</th>
        </tr>
        <tr>
            <td colspan="3">投与時間を選択してください</td>
        </tr>
        <tr>
            <td>朝食後</td><td id="status_morning"></td><td><a href="p3_morning.html" class="btn_home">与薬情報を閲覧<span></span></a></td>
        </tr>
        <tr>
            <td>昼食後</td><td id="status_noon"></td><td><a href="p3_noon.html" class="btn_home">与薬情報を閲覧<span></span></a></td>
        </tr>
        <tr>
            <td>夕食後</td><td id="status_night"></td><td><a href="p3_night.html" class="btn_home">与薬情報を閲覧<span></span></a></td>
        </tr>
    </table>
    <br>
    <br>
    <table class="IDlist" border="1">
        <caption>②<br>QRコード認証</caption>
        <tr>
            <th colspan="2">↓患者ID確認画面へ進む↓</th>
        </tr>
        <tr>
            <td colspan="2"><br>
            与薬情報を確認した場合、以下のボタンから<br>患者ID確認画面に進んで患者確認を行ってください<br><br>
            <a href="p3_IDcheck.html" class="btn_home">患者ID確認画面へ</a><br>
            </td>
        </tr>
    </table>
    </div>

    <footer>
        <a href="index.html" class="btn-stitch">もどる</a>
    </footer>

    </div>
</body>
</html>